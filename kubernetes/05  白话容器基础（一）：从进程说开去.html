<html>
<head>
  <title>05 | 白话容器基础（一）：从进程说开去</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1285"/>
<h1>05 | 白话容器基础（一）：从进程说开去</h1>

<div><span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="color:rgb(51, 51, 51);font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;-ms-text-size-adjust:100%;background:rgb(255, 255, 255);-webkit-tap-highlight-color:rgba(0, 0, 0, 0);"><div style="font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif;font-size-adjust:none;font-stretch:normal;"><div><div><div><div style="background:rgb(255, 255, 255);padding:30px 0px;flex-flow:row wrap;display:flex;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span><a href="https://time.geekbang.org/" style="color:rgb(229, 124, 57);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);font-size:15px;font-weight:400;">讲堂</a> <span style="font-size:10px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(204, 204, 204);margin-right:5px;"></span></span><span><a href="https://time.geekbang.org/column/116" style="color:rgb(229, 124, 57);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);font-size:15px;font-weight:400;">深入剖析Kubernetes</a> <span style="font-size:10px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(204, 204, 204);margin-right:5px;"></span></span><span><span style="color:rgb(136, 136, 136);font-size:15px;font-weight:400;">文章详情</span> </span></div> <h1 style="margin:0px;padding:0px;color:rgb(53, 53, 53);line-height:1.65rem;font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;font-size:1.34rem;font-weight:400;">
        05 | 白话容器基础（一）：从进程说开去
      </h1> <div style="color:rgb(136, 136, 136);font-size:0.93rem;margin-top:1.06rem;"><span>2018-09-03</span> <span>张磊</span></div> <div style="color:rgb(53, 53, 53);line-height:1.75rem;font-size:1rem;font-weight:400;white-space:normal;word-break:normal;margin-top:1.06rem;"><img src="05  白话容器基础（一）：从进程说开去_files/e61af57124bd1f5c3ab865552f5fa732.jpg" type="image/jpeg" data-filename="e61af57124bd1f5c3ab865552f5fa732.jpg" height="390" style="border:0px;border-image:none;max-width:100%;display:block;background-color:rgb(238, 238, 238);" width="696"/>  <div style="background:rgb(250, 250, 250);margin:1rem 0px;padding:1rem;border:1px solid rgb(217, 217, 217);border-image:none;width:100%;height:5.25rem;display:flex;box-sizing:border-box;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="#" style="color:rgb(26, 188, 156);border-bottom-color:rgb(26, 188, 156);border-bottom-width:1px;border-bottom-style:solid;text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border:medium;border-image:none;flex-shrink:0;background-image:url(data:image/png;base64,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&quot;);background-position:0px 0px;width:2.68rem;height:2.68rem;background-repeat:no-repeat;background-size:contain;"></a> <div style="margin-left:0.68rem;display:flex;min-width:0px;flex-direction:column;flex-grow:1;-webkit-box-flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;"><h3 style="margin:0px;padding:0px;color:rgb(53, 53, 53);line-height:1.35;font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;font-size:15.25px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;">05 | 白话容器基础（一）：从进程说开去</h3> <p style="margin:0.12rem 0px 0px;padding:0px;color:rgb(53, 53, 53);font-weight:400;line-height:1rem;font-size:11px;"><span style="color:rgb(136, 136, 136);">朗读人：张磊   </span> <span style="color:rgb(136, 136, 136);">11′32′′ | 5.29M</span></p></div>  <span style="display:inline-block;width:100%;background-color:rgb(238, 238, 238);" title="05 | 白话容器基础（一）：从进程说开去"></span></div> <div><div><p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">你好，我是张磊。今天我和你分享的主题是：白话容器基础之从进程说开去。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">在前面的 4 篇预习文章中，我梳理了“容器”这项技术的来龙去脉，通过这些内容，我希望你能理解如下几个事实：</p>
<ul style="margin:0px;padding:0px;list-style:disc;margin-bottom:1rem;margin-left:1.3em;">
<li style="margin:0px;padding:0px;">容器技术的兴起源于 PaaS 技术的普及；</li>
<li style="margin:0px;padding:0px;">Docker 公司发布的 Docker 项目具有里程碑式的意义；</li>
<li style="margin:0px;padding:0px;">Docker 项目通过“容器镜像”，解决了应用打包这个根本性难题。</li>
</ul>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">紧接着，我详细介绍了容器技术圈在过去五年里的“风云变幻”，而通过这部分内容，我希望你能理解这样一个道理：</p>
<blockquote style="margin:1em 3em 1em 2em;padding:0px;color:rgb(153, 153, 153);padding-left:1em;font-weight:400;border-left-color:rgb(26, 188, 156);border-left-width:1px;border-left-style:solid;position:relative;margin-bottom:1rem;">
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">容器本身没有价值，有价值的是“容器编排”。</p>
</blockquote>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">也正因为如此，容器技术生态才爆发了一场关于“容器编排”的“战争”。而这次战争，最终以 Kubernetes 项目和 CNCF 社区的胜利而告终。所以，这个专栏后面的内容，我会以 Docker 和 Kubernetes 项目为核心，为你详细介绍容器技术的各项实践与其中的原理。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">不过在此之前，你还需要搞清楚一个更为基础的问题：</p>
<blockquote style="margin:1em 3em 1em 2em;padding:0px;color:rgb(153, 153, 153);padding-left:1em;font-weight:400;border-left-color:rgb(26, 188, 156);border-left-width:1px;border-left-style:solid;position:relative;margin-bottom:1rem;">
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">容器，到底是怎么一回事儿？</p>
</blockquote>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">在第一篇预习文章<a href="https://time.geekbang.org/column/article/14254" style="color:rgb(26, 188, 156);border-bottom-color:rgb(26, 188, 156);border-bottom-width:1px;border-bottom-style:solid;text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);">《小鲸鱼大事记（一）：初出茅庐》</a>中，我已经提到过，容器其实是一种沙盒技术。顾名思义，沙盒就是能够像一个集装箱一样，把你的应用“装”起来的技术。这样，应用与应用之间，就因为有了边界而不至于相互干扰；而被装进集装箱的应用，也可以被方便地搬来搬去，这不就是 PaaS 最理想的状态嘛。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">不过，这两个能力说起来简单，但要用技术手段去实现它们，可能大多数人就无从下手了。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;"><strong style="color:rgb(0, 0, 0);font-weight:500;">所以，我就先来跟你说说这个“边界”的实现手段。</strong></p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">假如，现在你要写一个计算加法的小程序，这个程序需要的输入来自于一个文件，计算完成后的结果则输出到另一个文件中。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">由于计算机只认识 0 和 1，所以无论用哪种语言编写这段代码，最后都需要通过某种方式翻译成二进制文件，才能在计算机操作系统中运行起来。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">而为了能够让这些代码正常运行，我们往往还要给它提供数据，比如我们这个加法程序所需要的输入文件。这些数据加上代码本身的二进制文件，放在磁盘上，就是我们平常所说的一个“程序”，也叫代码的可执行镜像（executable image）。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">然后，我们就可以在计算机上运行这个“程序”了。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">首先，操作系统从“程序”中发现输入数据保存在一个文件中，所以这些数据就被会加载到内存中待命。同时，操作系统又读取到了计算加法的指令，这时，它就需要指示 CPU 完成加法操作。而 CPU 与内存协作进行加法计算，又会使用寄存器存放数值、内存堆栈保存执行的命令和变量。同时，计算机里还有被打开的文件，以及各种各样的 I/O 设备在不断地调用中修改自己的状态。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">就这样，一旦“程序”被执行起来，它就从磁盘上的二进制文件，变成了计算机内存中的数据、寄存器里的值、堆栈中的指令、被打开的文件，以及各种设备的状态信息的一个集合。<strong style="color:rgb(0, 0, 0);font-weight:500;">像这样一个程序运起来后的计算机执行环境的总和，就是我们今天的主角：进程。</strong></p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">所以，对于进程来说，它的静态表现就是程序，平常都安安静静地待在磁盘上；而一旦运行起来，它就变成了计算机里的数据和状态的总和，这就是它的动态表现。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">而<strong style="color:rgb(0, 0, 0);font-weight:500;">容器技术的核心功能，就是通过约束和修改进程的动态表现，从而为其创造出一个“边界”。</strong></p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">对于 Docker 等大多数 Linux 容器来说，<strong style="color:rgb(0, 0, 0);font-weight:500;">Cgroups 技术</strong>是用来制造约束的主要手段，而<strong style="color:rgb(0, 0, 0);font-weight:500;">Namespace 技术</strong>则是用来修改进程视图的主要方法。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">你可能会觉得 Cgroups 和 Namespace 这两个概念很抽象，别担心，接下来我们一起动手实践一下，你就很容易理解这两项技术了。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">假设你已经有了一个 Linux 操作系统上的 Docker 项目在运行，比如我的环境是 Ubuntu 16.04 和 Docker CE 18.05。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">接下来，让我们首先创建一个容器来试试。</p>
<pre style="margin:0px;padding:1em 1.5em;font-family:Courier,Courier New,monospace;background:hsla(0, 0%, 97%, 0.7);border:1px solid rgb(221, 221, 221);border-image:none;display:block;margin-bottom:1rem;overflow:hidden;padding-right:0px;padding-left:0px;margin-top:1rem;position:relative;"><code style="margin:0px;padding:0px;font-style:normal;font-weight:400;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;width:100%;padding-right:1rem;padding-left:1rem;font-size:0.8rem;display:block;overflow-x:auto;box-sizing:border-box;"><table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;border-spacing:0px;margin-bottom:0px;box-sizing:border-box;"><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">1</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>$ docker run -it busybox /bin/sh</div></td></tr><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">2</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>/ #</div></td></tr></tbody></table></code><div style="top:0.2em;right:1em;color:rgb(136, 136, 136);font-size:13px;position:absolute;cursor:pointer;-ms-user-select:none;"><span style="font-size:12px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;margin-right:0.2em;"></span>复制代码</div></pre>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这个命令是 Docker 项目最重要的一个操作，即大名鼎鼎的 docker run。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">而 -it 参数告诉了 Docker 项目在启动容器后，需要给我们分配一个文本输入 / 输出环境，也就是 TTY，跟容器的标准输入相关联，这样我们就可以和这个 Docker 容器进行交互了。而 /bin/sh 就是我们要在 Docker 容器里运行的程序。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">所以，上面这条指令翻译成人类的语言就是：请帮我启动一个容器，在容器里执行 /bin/sh，并且给我分配一个命令行终端跟这个容器交互。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这样，我的 Ubuntu 16.04 机器就变成了一个宿主机，而一个运行着 /bin/sh 的容器，就跑在了这个宿主机里面。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">上面的例子和原理，如果你已经玩过 Docker，一定不会感到陌生。此时，如果我们在容器里执行一下 ps 指令，就会发现一些更有趣的事情：</p>
<pre style="margin:0px;padding:1em 1.5em;font-family:Courier,Courier New,monospace;background:hsla(0, 0%, 97%, 0.7);border:1px solid rgb(221, 221, 221);border-image:none;display:block;margin-bottom:1rem;overflow:hidden;padding-right:0px;padding-left:0px;margin-top:1rem;position:relative;"><code style="margin:0px;padding:0px;font-style:normal;font-weight:400;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;width:100%;padding-right:1rem;padding-left:1rem;font-size:0.8rem;display:block;overflow-x:auto;box-sizing:border-box;"><table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;border-spacing:0px;margin-bottom:0px;box-sizing:border-box;"><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">1</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>/ # ps</div></td></tr><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">2</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>PID  USER   TIME COMMAND</div></td></tr><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">3</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>  1 root   0:00 /bin/sh</div></td></tr><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">4</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>  10 root   0:00 ps</div></td></tr></tbody></table></code><div style="top:0.2em;right:1em;color:rgb(136, 136, 136);font-size:13px;position:absolute;cursor:pointer;-ms-user-select:none;"><span style="font-size:12px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;margin-right:0.2em;"></span>复制代码</div></pre>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">可以看到，我们在 Docker 里最开始执行的 /bin/sh，就是这个容器内部的第 1 号进程（PID=1），而这个容器里一共只有两个进程在运行。这就意味着，前面执行的 /bin/sh，以及我们刚刚执行的 ps，已经被 Docker 隔离在了一个跟宿主机完全不同的世界当中。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这究竟是怎么做到呢？</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">本来，每当我们在宿主机上运行了一个 /bin/sh 程序，操作系统都会给它分配一个进程编号，比如 PID=100。这个编号是进程的唯一标识，就像员工的工牌一样。所以 PID=100，可以粗略地理解为这个 /bin/sh 是我们公司里的第 100 号员工，而第 1 号员工就自然是比尔 · 盖茨这样统领全局的人物。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">而现在，我们要通过 Docker 把这个 /bin/sh 程序运行在一个容器当中。这时候，Docker 就会在这个第 100 号员工入职时给他施一个“障眼法”，让他永远看不到前面的其他 99 个员工，更看不到比尔 · 盖茨。这样，他就会错误地以为自己就是公司里的第 1 号员工。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这种机制，其实就是对被隔离应用的进程空间做了手脚，使得这些进程只能看到重新计算过的进程编号，比如 PID=1。可实际上，他们在宿主机的操作系统里，还是原来的第 100 号进程。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;"><strong style="color:rgb(0, 0, 0);font-weight:500;">这种技术，就是 Linux 里面的 Namespace 机制</strong>。而 Namespace 的使用方式也非常有意思：它其实只是 Linux 创建新进程的一个可选参数。我们知道，在 Linux 系统中创建线程的系统调用是 clone()，比如：</p>
<pre style="margin:0px;padding:1em 1.5em;font-family:Courier,Courier New,monospace;background:hsla(0, 0%, 97%, 0.7);border:1px solid rgb(221, 221, 221);border-image:none;display:block;margin-bottom:1rem;overflow:hidden;padding-right:0px;padding-left:0px;margin-top:1rem;position:relative;"><code style="margin:0px;padding:0px;font-style:normal;font-weight:400;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;width:100%;padding-right:1rem;padding-left:1rem;font-size:0.8rem;display:block;overflow-x:auto;box-sizing:border-box;"><table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;border-spacing:0px;margin-bottom:0px;box-sizing:border-box;"><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">1</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>int pid = clone(main_function, stack_size, SIGCHLD, NULL); </div></td></tr></tbody></table></code><div style="top:0.2em;right:1em;color:rgb(136, 136, 136);font-size:13px;position:absolute;cursor:pointer;-ms-user-select:none;"><span style="font-size:12px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;margin-right:0.2em;"></span>复制代码</div></pre>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这个系统调用就会为我们创建一个新的进程，并且返回它的进程号 pid。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">而当我们用 clone() 系统调用创建一个新进程时，就可以在参数中指定 CLONE_NEWPID 参数，比如：</p>
<pre style="margin:0px;padding:1em 1.5em;font-family:Courier,Courier New,monospace;background:hsla(0, 0%, 97%, 0.7);border:1px solid rgb(221, 221, 221);border-image:none;display:block;margin-bottom:1rem;overflow:hidden;padding-right:0px;padding-left:0px;margin-top:1rem;position:relative;"><code style="margin:0px;padding:0px;font-style:normal;font-weight:400;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;width:100%;padding-right:1rem;padding-left:1rem;font-size:0.8rem;display:block;overflow-x:auto;box-sizing:border-box;"><table style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;border-collapse:collapse;border-spacing:0px;margin-bottom:0px;box-sizing:border-box;"><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgba(27, 31, 35, 0.3);box-sizing:border-box;text-align:right;white-space:nowrap;cursor:pointer;min-width:15px;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;"><div><span style="">1</span></div></td><td style="margin:0px;padding:0px;border:0px;border-image:none;color:rgb(36, 41, 46);box-sizing:border-box;line-height:20px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;vertical-align:top;overflow:visible;padding-right:10px;padding-left:10px;white-space:pre;position:relative;word-wrap:normal;"><div>int pid = clone(main_function, stack_size, CLONE_NEWPID | SIGCHLD, NULL); </div></td></tr></tbody></table></code><div style="top:0.2em;right:1em;color:rgb(136, 136, 136);font-size:13px;position:absolute;cursor:pointer;-ms-user-select:none;"><span style="font-size:12px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;margin-right:0.2em;"></span>复制代码</div></pre>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这时，新创建的这个进程将会“看到”一个全新的进程空间，在这个进程空间里，它的 PID 是 1。之所以说“看到”，是因为这只是一个“障眼法”，在宿主机真实的进程空间里，这个进程的 PID 还是真实的数值，比如 100。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">当然，我们还可以多次执行上面的 clone() 调用，这样就会创建多个 PID Namespace，而每个 Namespace 里的应用进程，都会认为自己是当前容器里的第 1 号进程，它们既看不到宿主机里真正的进程空间，也看不到其他 PID Namespace 里的具体情况。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">而<strong style="color:rgb(0, 0, 0);font-weight:500;">除了我们刚刚用到的 PID Namespace，Linux 操作系统还提供了 Mount、UTS、IPC、Network 和 User 这些 Namespace，用来对各种不同的进程上下文进行“障眼法”操作。</strong></p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">比如，Mount Namespace，用于让被隔离进程只看到当前 Namespace 里的挂载点信息；Network Namespace，用于让被隔离进程看到当前 Namespace 里的网络设备和配置。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;"><strong style="color:rgb(0, 0, 0);font-weight:500;">这，就是 Linux 容器最基本的实现原理了。</strong></p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">所以，Docker 容器这个听起来玄而又玄的概念，实际上是在创建容器进程时，指定了这个进程所需要启用的一组 Namespace 参数。这样，容器就只能“看”到当前 Namespace 所限定的资源、文件、设备、状态，或者配置。而对于宿主机以及其他不相关的程序，它就完全看不到了。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;"><strong style="color:rgb(0, 0, 0);font-weight:500;">所以说，容器，其实是一种特殊的进程而已。</strong></p>
<h2 style="margin:0px;padding:0px;color:rgb(0, 0, 0);line-height:1.35;font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;margin-top:1.2em;margin-bottom:0.45rem;font-size:1.12rem;font-weight:500;">总结</h2>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">谈到为“进程划分一个独立空间”的思想，相信你一定会联想到虚拟机。而且，你应该还看过一张虚拟机和容器的对比图。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;"><img src="05  白话容器基础（一）：从进程说开去_files/8089934bedd326703bf5fa6cf70f9740.png" type="image/png" data-filename="8089934bedd326703bf5fa6cf70f9740.png" alt="" height="263" style="border:0px;border-image:none;max-width:100%;display:block;background-color:rgb(238, 238, 238);" width="529"/></p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这幅图的左边，画出了虚拟机的工作原理。其中，名为 Hypervisor 的软件是虚拟机最主要的部分。它通过硬件虚拟化功能，模拟出了运行一个操作系统需要的各种硬件，比如 CPU、内存、I/O 设备等等。然后，它在这些虚拟的硬件上安装了一个新的操作系统，即 Guest OS。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这样，用户的应用进程就可以运行在这个虚拟的机器中，它能看到的自然也只有 Guest OS 的文件和目录，以及这个机器里的虚拟设备。这就是为什么虚拟机也能起到将不同的应用进程相互隔离的作用。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">而这幅图的右边，则用一个名为 Docker Engine 的软件替换了 Hypervisor。这也是为什么，很多人会把 Docker 项目称为“轻量级”虚拟化技术的原因，实际上就是把虚拟机的概念套在了容器上。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;"><strong style="color:rgb(0, 0, 0);font-weight:500;">可是这样的说法，却并不严谨。</strong></p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">在理解了 Namespace 的工作方式之后，你就会明白，跟真实存在的虚拟机不同，在使用 Docker 的时候，并没有一个真正的“Docker 容器”运行在宿主机里面。Docker 项目帮助用户启动的，还是原来的应用进程，只不过在创建这些进程时，Docker 为它们加上了各种各样的 Namespace 参数。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">这时，这些进程就会觉得自己是各自 PID Namespace 里的第 1 号进程，只能看到各自 Mount Namespace 里挂载的目录和文件，只能访问到各自 Network Namespace 里的网络设备，就仿佛运行在一个个“容器”里面，与世隔绝。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">不过，相信你此刻已经会心一笑：这些不过都是“障眼法”罢了。</p>
<h2 style="margin:0px;padding:0px;color:rgb(0, 0, 0);line-height:1.35;font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;margin-top:1.2em;margin-bottom:0.45rem;font-size:1.12rem;font-weight:500;">思考题</h2>
<ol style="margin:0px;padding:0px;list-style:decimal;margin-bottom:1rem;margin-left:1.9em;">
<li style="margin:0px;padding:0px;">
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">鉴于我对容器本质的讲解，你觉得上面这张容器和虚拟机对比图右侧关于容器的部分，怎么画才更精确？</p>
</li>
<li style="margin:0px;padding:0px;">
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">你是否知道最新的 Docker 项目默认会为容器启用哪些 Namespace 吗？</p>
</li>
</ol>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;">感谢你的收听，欢迎你给我留言，也欢迎分享给更多的朋友一起阅读。</p>
<p style="margin:0px;padding:0px;margin-bottom:1rem;color:rgb(53, 53, 53);font-weight:400;margin-top:0.15rem;"><img src="05  白话容器基础（一）：从进程说开去_files/47a6f3bf6b92d58512d5a2ed0a556f55.jpg" type="image/jpeg" data-filename="47a6f3bf6b92d58512d5a2ed0a556f55.jpg" alt="" height="344" style="border:0px;border-image:none;max-width:100%;display:block;background-color:rgb(238, 238, 238);" width="696"/></p>
</div></div> <p style="margin:0px;padding:0px;margin-bottom:30px;color:rgb(153, 153, 153);font-weight:400;margin-top:0.15rem;">
          版权归极客邦科技所有，未经许可不得转载
        </p></div> <div style="overflow:hidden;margin-bottom:-30px;"><a style="color:rgb(255, 255, 255);text-decoration:none;height:20px;text-align:center;line-height:20px;font-size:12px;display:inline-block;flex-grow:1;border-radius:3px;background-color:rgb(255, 90, 5);word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-box-flex:1;padding:4px 8px;cursor:pointer;float:right;">写留言</a></div> <div style="margin-top:2rem;"><h2 style="margin:0px;padding:0px;color:rgb(136, 136, 136);line-height:1.35;font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;text-align:center;margin-bottom:1rem;position:relative;z-index:1;"><span style="color:rgb(136, 136, 136);line-height:1.35;font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;text-align:center;left:0px;top:56%;width:100%;border-top-color:rgb(136, 136, 136);border-top-width:1px;border-top-style:dotted;position:absolute;z-index:-1;"></span><span style="background:rgb(255, 255, 255);padding:0px 1rem;font-size:15.25px;font-weight:400;display:inline-block;">精选留言</span></h2> <ul style="margin:0px;padding:0px;list-style:none;"><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/5acd3276.jpg" type="image/jpeg" data-filename="5acd3276.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">atompi</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">15</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">下一讲：隔离与限制，会介绍Cgroups的</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> </div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/b7a406c9.jpg" type="image/jpeg" data-filename="b7a406c9.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">Hurt</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">5</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">为什么clone()时 还有线程呢 是写错了吗 还是有线程的启动啊</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">看得非常认真！严格说，clone()是线程操作，但linux 的线程是用进程实现的</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-03</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/132.jpg" type="image/jpeg" data-filename="132.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">blackpiglet</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">19</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">1 用 namespace 框住app。<br/>2 PID, UTS, network, user, mount, IPC, cgroup<br/><br/>虽然本质上理解，namespace 和 cgroup 是内核特性，容器本质上就是一个加了限定参数的进程，效果上看，图画的也没毛病。<br/>这么看，是不是说容器的安全性，也就是隔离性，就是没办法达到虚拟机的级别呢？</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">没错，已经进门了哈</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-03</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/132 [1].jpg" type="image/jpeg" data-filename="132.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">包子</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">11</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">老师有个问题一直困扰，容器是一个单进程，那比如我有一个镜像里面集成了jdk, netstat, ping等，虽然这个容器启动时里面是一个java进程，但是我可以进到容器里面执行各种命令，比如netstat等，那这些命令在容器的运行过程中是在运行的吗？</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">是在运行的。但它们不受docker的控制，就像野孩子。所以单进程意思不是只能运行一个进程，而是只有一个进程是可控的。</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/7aec01a5.jpg" type="image/jpeg" data-filename="7aec01a5.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">晓聪</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">10</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">👍docker是没有上过历史课的进程</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-04</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">查水表！</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/132 [2].jpg" type="image/jpeg" data-filename="132.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">manatee</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">8</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">想请问下老师，如果说容器只是跑在系统上的一个进程，那容器和宿主机不同os<br/>又是怎么实现的呢，请帮忙解惑，谢谢。</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-07</span> </div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/f3207127.jpg" type="image/jpeg" data-filename="f3207127.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">贾鹏</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">7</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">user  ns这块我理解的不太清楚，默认情况下容器里的root和宿主机root感觉是一样的（通过/proc/pid/uid_map看映射关系是把容器uid 0映射到宿主机0了），而且在容器中能把主机cpu下线。感觉userns-remap特性好像也解决不了这个cpu下线的问题。希望得到老师的解惑，谢谢。或者如果方便的话能不能加下微信呢: jp6439</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">user ns只修改user/group相关的视图。不过不太明白把cpu下线是什么情况？</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/072e5068.jpg" type="image/jpeg" data-filename="072e5068.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">寻找自我</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">7</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">做了几年内核开发，看过docker源码，用lxc搞了一个容器轮子。浙大SEL实验室确实很早就在进行docker的研究，以前也跟进看过很多文章。lxc不是新东西，不过还是很多人不懂原理，博主文章通俗易懂，点赞！</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> </div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/defaultAvatar.e4ab9fe.jpg" type="image/jpeg" data-filename="defaultAvatar.e4ab9fe.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">extraterrestrial！！</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">6</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">能再推荐点扩展阅读材料就更好了，比如有一些不同资源使用namespace的程序例子，从内核的视角用没用namespace有啥区别，以及namespace的实现之类的～</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">收到，后面推荐</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/dead073b.jpg" type="image/jpeg" data-filename="dead073b.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">Jay</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">6</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">老师，Cgroups是不是没有细讲？</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">当然是下一篇</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-03</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/0.jpg" type="image/jpeg" data-filename="0.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">Maiza</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">6</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">真的是白话 😄，终于搞懂了 namespace 了，话说 cgroup 是啥 。。。</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> </div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/534db55d.jpg" type="image/jpeg" data-filename="534db55d.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">huan</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">5</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">第一个问题，我感觉docker engine 最好虚线标识，表示他只是一种启动时用，运行时并不需要，真实进程是直接run在host os上</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">听起来不错哦</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-03</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/f3207127 [1].jpg" type="image/jpeg" data-filename="f3207127.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">贾鹏</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">4</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">ipc pid mnt net uts user cgroup</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">cgroup ns是个新东西，能知道这个的可以做老师了哈</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-03</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/528a73db.jpg" type="image/jpeg" data-filename="528a73db.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">终身学习</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">3</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">在docker出来之前是怎么用容器的，有想到把操作系统包进去吗？容器技术又是基于什么原因出现的呢？</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">那时候各家有各家的方法，也打包操作系统，叫rootfs，请关注后面镜像部分的讲解</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/28f11cd9.jpg" type="image/jpeg" data-filename="28f11cd9.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">岁月～静好</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">3</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">容器和虚拟机比不仅仅是少了一层操作系统那么简单啊</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">没错，下一篇有详细总结</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-03</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/132 [3].jpg" type="image/jpeg" data-filename="132.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">jssfy</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">2</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">进一步，1. 如果容器镜像os支持某硬件的驱动，但是宿主机os如果不支持该硬件驱动的话，是否也白搭<br/>2. 是否可以理解为 镜像只是提供了一套镜像文件系统中的各种文件，而各种内核相关的模块或者特性支持，完全依赖于宿主机？<br/></div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-08</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">说的没毛病。</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-08</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/132 [4].jpg" type="image/jpeg" data-filename="132.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">包子</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">2</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">老师有个问题一直困扰，容器是一个单进程，那比如我有一个镜像里面集成了jdk, netstat, ping等，虽然这个容器启动时里面是一个java进程，但是我可以进到容器里面执行各种命令，比如netstat等，那这些命令在容器的运行过程中是在运行的吗？<br/>---------<br/>作者回复<br/>是在运行的。但它们不受docker的控制，就像野孩子。所以单进程意思不是只能运行一个进程，而是只有一个进程是可控的。<br/><br/>老师接着这个问题有几个问题<br/>1. 这些不被docker管理的进程在哪里能看得到？这些进程是否会很占用硬件资源？比如netstat <br/>2. 关于mac上运行的docker，比如容器进程依赖linux内核的版本4.2才能正确运行（镜像的内核版本是4.2的），那么既然docker只是用资源隔离的形式运行的。那我在mac起的这个容器时是否能正确运行？他会加载完整的linux操作系统吗？</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-04</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">ps同样可以看到。win mac docker上跑其实都是个虚拟机</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-05</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/71e1cc29.jpg" type="image/jpeg" data-filename="71e1cc29.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">Kaer</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">2</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">虚拟化和容器的最大区别可以理解这个吗：1:虚拟化是同一台物理机不同的操作系统隔离应用进程2:但是容器是同一个操作系统的不同进程隔离。  简单来说就是：一个是操作系统级别隔离，一个是进程间隔离。</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">实际上是 硬件级别 的隔离 VM可是有虚拟硬件的</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/0 [1].jpg" type="image/jpeg" data-filename="0.jpg" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">kyleqian</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">2</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">chroot没提到啊，这个应该是一种很关键的资源隔离机制吧。</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">哈哈，下一篇马上就来</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li><li style="margin:0px;padding:0px;width:100%;margin-bottom:1rem;display:flex;list-style-position:inside;flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><img src="05  白话容器基础（一）：从进程说开去_files/0.png" type="image/png" data-filename="0.png" height="42" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/> <div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="color:rgb(136, 136, 136);line-height:1.2;font-size:15.25px;font-weight:400;">李晶</span> <div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"> <a href="#" style="color:rgb(26, 188, 156);text-decoration:none;word-wrap:break-word;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);border-bottom-color:currentColor;border-bottom-width:medium;border-bottom-style:none;font-size:15.25px;display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><i style="font-size:0.75rem;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(136, 136, 136);margin-top:-0.01rem;margin-right:0.3rem;display:inline-block;"></i> <span style="color:rgb(255, 90, 5);">2</span></a></div></div> <div style="color:rgb(53, 53, 53);line-height:1.6;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">有一个问题 所以通过pid 可以判断自己是在docker里面还是在宿主机上。怎么通过命令行知道自己现在是在container里面还是在外面？</div> <span style="color:rgb(136, 136, 136);line-height:1;font-size:9px;">2018-09-03</span> <div><div style="font-size:15.25px;"><i style="font-size:15.25px;font-style:normal;-webkit-text-stroke-width:0.2px;font-family:iconfont;color:rgb(255, 90, 5);"></i> <span style="color:rgb(136, 136, 136);font-weight:400;margin-left:-12px;">作者回复</span></div> <p style="margin:0px;padding:0px;color:rgb(53, 53, 53);font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;">有很多种方法。比如查看/proc/1/cgroup下的文件结构</p> <p style="margin:0px;padding:0px;color:rgb(136, 136, 136);font-size:9px;">2018-09-04</p></div></div></li></ul></div></div></div></div></div></div></div><br/></div></span>
</div></body></html> 