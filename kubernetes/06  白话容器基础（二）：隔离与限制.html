<html>
<head>
  <title>06 | 白话容器基础（二）：隔离与限制</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600240 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1568"/>
<h1>06 | 白话容器基础（二）：隔离与限制</h1>

<div>
<span><div style="-evernote-webclip:true;"><div><br/></div><div style="background: rgb(255, 255, 255); -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><div style="font-size: 1em;"><div><div style="background:rgb(255, 255, 255);padding:30px 0px;flex-flow:row wrap;display:flex;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><span style="font-size: 16px; display: inline-block;"><a href="https://time.geekbang.org/" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-size: 15px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8; color: rgb(229, 124, 57); text-decoration: none;">讲堂</a> <span style="font-size: 10px; -webkit-text-stroke-width: 0.2px; margin-right: 5px; color: rgb(204, 204, 204); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"></span><a href="https://time.geekbang.org/column/116" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-size: 15px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8; color: rgb(229, 124, 57); text-decoration: none;">深入剖析Kubernetes</a> <span style="font-size: 10px; -webkit-text-stroke-width: 0.2px; margin-right: 5px; color: rgb(204, 204, 204); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"></span><span style="font-size: 15px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">文章详情</span> </span></div><h1 style="margin: 0px; padding: 0px; font-size: 1.34rem;"><span style="font-size: 1.34rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Verdana, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.65rem;">06 | 白话容器基础（二）：隔离与限制</span></h1><div style="font-size: 0.93rem; margin-top: 1.06rem;"><span style="font-size: 0.93rem; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05 张磊</span></div><div style="font-size: 1rem; white-space: normal; word-break: normal; margin-top: 1.06rem;"><div><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"><img src="06  白话容器基础（二）：隔离与限制_files/12a18c84cab19f79f981c2bf918d0270.jpg" type="image/jpeg" data-filename="12a18c84cab19f79f981c2bf918d0270.jpg" style="border:0px;border-image:none;max-width:100%;display:block;background-color:rgb(238, 238, 238);" width="696"/></span></div><div style="background:rgb(250, 250, 250);margin:1rem 0px;padding:1rem;border:1px solid rgb(217, 217, 217);border-image:none;width:100%;height:5.25rem;display:flex;box-sizing:border-box;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div style="margin-left:0.68rem;display:flex;min-width:0px;flex-direction:column;flex-grow:1;-webkit-box-flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;"><h3 style="margin: 0px; padding: 0px; font-size: 15.25px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Verdana, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.35;">06 | 白话容器基础（二）：隔离与限制</span></h3><div style="margin: 0.12rem 0px 0px; padding: 0px; font-size: 11px;"><span style="font-size: 11px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1rem;">朗读人：张磊   </span> <span style="font-size: 11px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1rem;">16′36′′ | 7.61M</span></div></div></div><div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">你好，我是张磊。我今天和你分享的主题是：白话容器基础之隔离与限制。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">在上一篇文章中，我详细介绍了 Linux 容器中用来实现“隔离”的技术手段：Namespace。而通过这些讲解，你应该能够明白，</span><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">Namespace 技术实际上修改了应用进程看待整个计算机“视图”，即它的“视线”被操作系统做了限制，只能“看到”某些指定的内容</span><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">。但对于宿主机来说，这些被“隔离”了的进程跟其他进程并没有太大区别。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">说到这一点，相信你也能够知道我在上一篇文章最后给你留下的第一个思考题的答案了：在之前虚拟机与容器技术的对比图里，不应该把 Docker Engine 或者任何容器管理工具放在跟 Hypervisor 相同的位置，因为它们并不像 Hypervisor 那样对应用进程的隔离环境负责，也不会创建任何实体的“容器”，真正对隔离环境负责的是宿主机操作系统本身：</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"><img src="06  白话容器基础（二）：隔离与限制_files/9f973d5d0faab7c6361b2b67800d0e59.jpg" type="image/jpeg" data-filename="9f973d5d0faab7c6361b2b67800d0e59.jpg" style="border:0px;border-image:none;max-width:100%;display:block;background-color:rgb(238, 238, 238);" width="685"/></span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">所以，在这个对比图里，我们应该把 Docker 画在跟应用同级别并且靠边的位置。这意味着，用户运行在容器里的应用进程，跟宿主机上的其他进程一样，都由宿主机操作系统统一管理，只不过这些被隔离的进程拥有额外设置过的 Namespace 参数。而 Docker 项目在这里扮演的角色，更多的是旁路式的辅助和管理工作。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">我在后续分享 CRI 和容器运行时的时候还会专门介绍到，其实像 Docker 这样的角色甚至可以去掉。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">这样的架构也解释了为什么 Docker 项目比虚拟机更受欢迎的原因。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">这是因为，使用虚拟化技术作为应用沙盒，就必须要由 Hypervisor 来负责创建虚拟机，这个虚拟机是真实存在的，并且它里面必须运行一个完整的 Guest OS 才能执行用户的应用进程。这就不可避免地带来了额外的资源消耗和占用。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">根据实验，一个运行着 CentOS 的 KVM 虚拟机启动后，在不做优化的情况下，虚拟机自己就需要占用 100~200 MB 内存。此外，用户应用运行在虚拟机里面，它对宿主机操作系统的调用就不可避免地要经过虚拟化软件的拦截和处理，这本身又是一层性能损耗，尤其对计算资源、网络和磁盘 I/O 的损耗非常大。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">而相比之下，容器化后的用户应用，却依然还是一个宿主机上的普通进程，这就意味着这些因为虚拟化而带来的性能损耗都是不存在的；而另一方面，使用 Namespace 作为隔离手段的容器并不需要单独的 Guest OS，这就使得容器额外的资源占用几乎可以忽略不计。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">所以说，</span><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">“敏捷”和“高性能”是容器相较于虚拟机最大的优势，也是它能够在 PaaS 这种更细粒度的资源管理平台上大行其道的重要原因。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">不过，有利就有弊，基于 Linux Namespace 的隔离机制相比于虚拟化技术也有很多不足之处，其中最主要的问题就是：</span><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">隔离得不彻底。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(255, 90, 5); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">首先，既然容器只是运行在宿主机上的一种特殊的进程，那么多个容器之间使用的就还是同一个宿主机的操作系统内核。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">尽管你可以在容器里通过 Mount Namespace 单独挂载其他不同版本的操作系统文件，比如 CentOS 或者 Ubuntu，但这并不能改变共享宿主机内核的事实。这意味着，如果你要在 Windows 宿主机上运行 Linux 容器，或者在低版本的 Linux 宿主机上运行高版本的 Linux 容器，都是行不通的。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">而相比之下，拥有硬件虚拟化技术和独立 Guest OS 的虚拟机就要方便得多了。最极端的例子是，Microsoft 的云计算平台 Azure，实际上就是运行在 Windows 服务器集群上的，但这并不妨碍你在它上面创建各种 Linux 虚拟机出来。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(255, 90, 5); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">其次，在 Linux 内核中，有很多资源和对象是不能被 Namespace 化的，最典型的例子就是：时间。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">这就意味着，如果你的容器中的程序使用 settimeofday(2) 系统调用修改了时间，整个宿主机的时间都会被随之修改，这显然不符合用户的预期。相比于在虚拟机里面可以随便折腾的自由度，在容器里部署应用的时候，“什么能做，什么不能做”，就是用户必须考虑的一个问题。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">此外，由于上述问题，尤其是共享宿主机内核的事实，容器给应用暴露出来的攻击面是相当大的，应用“越狱”的难度自然也比虚拟机低得多。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">更为棘手的是，尽管在实践中我们确实可以使用 Seccomp 等技术，对容器内部发起的所有系统调用进行过滤和甄别来进行安全加固，但这种方法因为多了一层对系统调用的过滤，一定会拖累容器的性能。何况，默认情况下，谁也不知道到底该开启哪些系统调用，禁止哪些系统调用。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">所以，在生产环境中，没有人敢把运行在物理机上的 Linux 容器直接暴露到公网上。当然，我后续会讲到的基于虚拟化或者独立内核技术的容器实现，则可以比较好地在隔离与性能之间做出平衡。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">在介绍完容器的“隔离”技术之后，我们再来研究一下容器的“限制”问题。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">也许你会好奇，我们不是已经通过 Linux Namespace 创建了一个“容器”吗，为什么还需要对容器做“限制”呢？</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">我还是以 PID Namespace 为例，来给你解释这个问题。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">虽然容器内的第 1 号进程在“障眼法”的干扰下只能看到容器里的情况，但是宿主机上，它作为第 100 号进程与其他所有进程之间依然是平等的竞争关系。这就意味着，虽然第 100 号进程表面上被隔离了起来，但是它所能够使用到的资源（比如 CPU、内存），却是可以随时被宿主机上的其他进程（或者其他容器）占用的。当然，这个 100 号进程自己也可能把所有资源吃光。这些情况，显然都不是一个“沙盒”应该表现出来的合理行为。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">而</span><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">Linux Cgroups 就是 Linux 内核中用来为进程设置资源限制的一个重要功能。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">有意思的是，Google 的工程师在 2006 年发起这项特性的时候，曾将它命名为“进程容器”（process container）。实际上，在 Google 内部，“容器”这个术语长期以来都被用于形容被 Cgroups 限制过的进程组。后来 Google 的工程师们说，他们的 KVM 虚拟机也运行在 Borg 所管理的“容器”里，其实也是运行在 Cgroups“容器”当中。这和我们今天说的 Docker 容器差别很大。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">Linux Cgroups 的全称是 Linux Control Group。它最主要的作用，就是限制一个进程组能够使用的资源上限，包括 CPU、内存、磁盘、网络带宽等等。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">此外，Cgroups 还能够对进程进行优先级设置、审计，以及将进程挂起和恢复等操作。在今天的分享中，我只和你重点探讨它与容器关系最紧密的“限制”能力，并通过一组实践来带你认识一下 Cgroups。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">在 Linux 中，Cgroups 给用户暴露出来的操作接口是文件系统，即它以文件和目录的方式组织在操作系统的 /sys/fs/cgroup 路径下。在 Ubuntu 16.04 机器里，我可以用 mount 指令把它们展示出来，这条命令是：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ mount -t cgroup</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">cpuset on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">3</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">cpu on /sys/fs/cgroup/cpu type cgroup (rw,nosuid,nodev,noexec,relatime,cpu)</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">4</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">cpuacct on /sys/fs/cgroup/cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpuacct)</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">5</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">blkio on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">6</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">memory on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">7</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">...</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">它的输出结果，是一系列文件系统目录。如果你在自己的机器上没有看到这些目录，那你就需要自己去挂载 Cgroups，具体做法可以自行 Google。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">可以看到，在 /sys/fs/cgroup 下面有很多诸如 cpuset、cpu、 memory 这样的子目录，也叫子系统。这些都是我这台机器当前可以被 Cgroups 进行限制的资源种类。而在子系统对应的资源种类下，你就可以看到该类资源具体可以被限制的方法。比如，对 CPU 子系统来说，我们就可以看到如下几个配置文件，这个指令是：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ ls /sys/fs/cgroup/cpu</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">cgroup.clone_children cpu.cfs_period_us cpu.rt_period_us cpu.shares notify_on_release</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">3</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">cgroup.procs cpu.cfs_quota_us cpu.rt_runtime_us cpu.stat tasks</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">如果熟悉 Linux CPU 管理的话，你就会在它的输出里注意到 cfs_period 和 cfs_quota 这样的关键词。这两个参数需要组合使用，可以用来限制进程在长度为 cfs_period 的一段时间内，只能被分配到总量为 cfs_quota 的 CPU 时间。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">而这样的配置文件又如何使用呢？</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">你需要在对应的子系统下面创建一个目录，比如，我们现在进入 /sys/fs/cgroup/cpu 目录下：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">root@ubuntu:/sys/fs/cgroup/cpu$ mkdir container</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">root@ubuntu:/sys/fs/cgroup/cpu$ ls container/</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">3</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">cgroup.clone_children cpu.cfs_period_us cpu.rt_period_us cpu.shares notify_on_release</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">4</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">cgroup.procs cpu.cfs_quota_us cpu.rt_runtime_us cpu.stat tasks</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">这个目录就称为一个“控制组”。你会发现，操作系统会在你新创建的 container 目录下，自动生成该子系统对应的资源限制文件。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">现在，我们在后台执行这样一条脚本：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ while : ; do : ; done &amp;</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">[1] 226</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">显然，它执行了一个死循环，可以把计算机的 CPU 吃到 100%，根据它的输出，我们可以看到这个脚本在后台运行的进程号（PID）是 226。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">这样，我们可以用 top 指令来确认一下 CPU 有没有被打满：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ top</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">%Cpu0 :100.0 us, 0.0 sy, 0.0 ni, 0.0 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">在输出里可以看到，CPU 的使用率已经 100% 了（%Cpu0 :100.0 us）。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">而此时，我们可以通过查看 container 目录下的文件，看到 container 控制组里的 CPU quota 还没有任何限制（即：-1），CPU period 则是默认的 100 ms（100000 us）：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ cat /sys/fs/cgroup/cpu/container/cpu.cfs_quota_us</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">-1</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">3</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ cat /sys/fs/cgroup/cpu/container/cpu.cfs_period_us</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">4</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">100000</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">接下来，我们可以通过修改这些文件的内容来设置限制。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">比如，向 container 组里的 cfs_quota 文件写入 20 ms（20000 us）：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ echo 20000 &gt; /sys/fs/cgroup/cpu/container/cpu.cfs_quota_us</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">结合前面的介绍，你应该能明白这个操作的含义，它意味着在每 100 ms 的时间里，被该控制组限制的进程只能使用 20 ms 的 CPU 时间，也就是说这个进程只能使用到 20% 的 CPU 带宽。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">接下来，我们把被限制的进程的 PID 写入 container 组里的 tasks 文件，上面的设置就会对该进程生效了：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ echo 226 &gt; /sys/fs/cgroup/cpu/container/tasks</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">我们可以用 top 指令查看一下：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ top</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">%Cpu0 : 20.3 us, 0.0 sy, 0.0 ni, 79.7 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">可以看到，计算机的 CPU 使用率立刻降到了 20%（%Cpu0 : 20.3 us）。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">除 CPU 子系统外，Cgroups 的每一项子系统都有其独有的资源限制能力，比如：</span></div><ul style="margin:0px;padding:0px;list-style:disc;margin-bottom:1rem;margin-left:1.3em;"><li style="margin:0px;padding:0px;"><div><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">blkio，为块设备设定I/O 限制，一般用于磁盘等设备；</span></div></li><li style="margin:0px;padding:0px;"><div><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">cpuset，为进程分配单独的 CPU 核和对应的内存节点；</span></div></li><li style="margin:0px;padding:0px;"><div><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">memory，为进程设定内存使用的限制。</span></div></li></ul><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">Linux Cgroups 的设计还是比较易用的，简单粗暴地理解呢，它就是一个子系统目录加上一组资源限制文件的组合</span><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">。而对于 Docker 等 Linux 容器项目来说，它们只需要在每个子系统下面，为每个容器创建一个控制组（即创建一个新目录），然后在启动容器进程之后，把这个进程的 PID 填写到对应控制组的 tasks 文件中就可以了。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">而至于在这些控制组下面的资源文件里填上什么值，就靠用户执行 docker run 时的参数指定了，比如这样一条命令：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ docker run -it --cpu-period=100000 --cpu-quota=20000 ubuntu /bin/bash</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">在启动这个容器后，我们可以通过查看 Cgroups 文件系统下，CPU 子系统中，“docker”这个控制组里的资源限制文件的内容来确认：</span></div><div style="margin: 1rem 0px; padding: 1em 0px; background: rgba(248, 248, 248, 0.7); border: 1px solid rgb(221, 221, 221); overflow: hidden; position: relative;"><div style="margin: 0px; padding: 0px 1rem; width: 100%; font-size: 0.8rem; overflow-x: auto; box-sizing: border-box;"><div><br/></div><table style="font-size: inherit; border-spacing: 0px; box-sizing: border-box; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody style="box-sizing:border-box;"><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">1</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ cat /sys/fs/cgroup/cpu/docker/5d5c9f67d/cpu.cfs_period_us</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">2</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">100000</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">3</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">$ cat /sys/fs/cgroup/cpu/docker/5d5c9f67d/cpu.cfs_quota_us</span></div></td></tr><tr style="box-sizing:border-box;"><td style="box-sizing: border-box; text-align: right; white-space: nowrap; cursor: pointer; font-size: 12px; vertical-align: top; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgba(27, 31, 35, 0.3); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">4</span></div></td><td style="box-sizing: border-box; font-size: 12px; vertical-align: top; overflow: visible; white-space: pre; position: relative; word-wrap: normal; width: 130px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><span style="font-size: 12px; color: rgb(36, 41, 46); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 20px;">20000</span></div></td></tr></tbody></table><div><br/></div></div><div style="top: 0.2em; right: 1em; font-size: 13px; position: absolute; cursor: pointer;"><span style="font-size: 12px; -webkit-text-stroke-width: 0.2px; margin-right: 0.2em; color: rgb(136, 136, 136); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"></span><span style="font-size: 13px; color: rgb(136, 136, 136); font-family: Courier, &quot;Courier New&quot;, monospace; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">复制代码</span></div></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">这就意味着这个 Docker 容器，只能使用到 20% 的 CPU 带宽。</span></div><h2 style="margin: 1.2em 0px 0.45rem; padding: 0px; font-size: 1.12rem;"><span style="font-size: 1.12rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Verdana, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.35;">总结</span></h2><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">在这篇文章中，我首先介绍了容器使用 Linux Namespace 作为隔离手段的优势和劣势，对比了 Linux 容器跟虚拟机技术的不同，进一步明确了“容器只是一种特殊的进程”这个结论。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">除了创建 Namespace 之外，在后续关于容器网络的分享中，我还会介绍一些其他 Namespace 的操作，比如看不见摸不着的 Linux Namespace 在计算机中到底如何表示、一个进程如何“加入”到其他进程的 Namespace 当中，等等。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">紧接着，我详细介绍了容器在做好了隔离工作之后，又如何通过 Linux Cgroups 实现资源的限制，并通过一系列简单的实验，模拟了 Docker 项目创建容器限制的过程。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">通过以上讲述，你现在应该能够理解，一个正在运行的 Docker 容器，其实就是一个启用了多个 Linux Namespace 的应用进程，而这个进程能够使用的资源量，则受 Cgroups 配置的限制。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">这也是容器技术中一个非常重要的概念，即：</span><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">容器是一个“单进程”模型。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">由于一个容器的本质就是一个进程，用户的应用进程实际上就是容器里 PID=1 的进程，也是其他后续创建的所有进程的父进程。这就意味着，在一个容器中，你没办法同时运行两个不同的应用，除非你能事先找到一个公共的 PID=1 的程序来充当两个不同应用的父进程，这也是为什么很多人都会用 systemd 或者 supervisord 这样的软件来代替应用本身作为容器的启动进程。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">但是，在后面分享容器设计模式时，我还会推荐其他更好的解决办法。这是因为容器本身的设计，就是希望容器和应用能够</span><span style="font-size: 1rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.75rem;">同生命周期</span><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">，这个概念对后续的容器编排非常重要。否则，一旦出现类似于“容器是正常运行的，但是里面的应用早已经挂了”的情况，编排系统处理起来就非常麻烦了。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">另外，跟 Namespace 的情况类似，Cgroups 对资源的限制能力也有很多不完善的地方，被提及最多的自然是 /proc 文件系统的问题。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">众所周知，Linux 下的 /proc 目录存储的是记录当前内核运行状态的一系列特殊文件，用户可以通过访问这些文件，查看系统以及当前正在运行的进程的信息，比如 CPU 使用情况、内存占用率等，这些文件也是 top 指令查看系统信息的主要数据来源。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">但是，你如果在容器里执行 top 指令，就会发现，它显示的信息居然是宿主机的 CPU 和内存数据，而不是当前容器的数据。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">造成这个问题的原因就是，/proc 文件系统并不知道用户通过 Cgroups 给这个容器做了什么样的资源限制，即：/proc 文件系统不了解 Cgroups 限制的存在。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">在生产环境中，这个问题必须进行修正，否则应用程序在容器里读取到的 CPU 核数、可用内存等信息都是宿主机上的数据，这会给应用的运行带来非常大的困惑和风险。这也是在企业中，容器化应用碰到的一个常见问题，也是容器相较于虚拟机另一个不尽如人意的地方。</span></div><h2 style="margin: 1.2em 0px 0.45rem; padding: 0px; font-size: 1.12rem;"><span style="font-size: 1.12rem; color: rgb(0, 0, 0); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Verdana, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 500; line-height: 1.35;">思考题</span></h2><ol style="margin:0px;padding:0px;list-style:decimal;margin-bottom:1rem;margin-left:1.9em;"><li style="margin:0px;padding:0px;"><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">你是否知道如何修复容器中的 top 指令以及 /proc 文件系统中的信息呢？（提示：lxcfs）</span></div></li><li style="margin:0px;padding:0px;"><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">在从虚拟机向容器环境迁移应用的过程中，你还遇到哪些容器与虚拟机的不一致问题？</span></div></li></ol><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">感谢你的收听，欢迎给我留言一起讨论，也欢迎分享给更多的朋友一起阅读。</span></div><div style="margin: 0.15rem 0px 1rem; padding: 0px;"><span style="font-size: 1rem; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;"><img src="06  白话容器基础（二）：隔离与限制_files/47a6f3bf6b92d58512d5a2ed0a556f55.jpg" type="image/jpeg" data-filename="47a6f3bf6b92d58512d5a2ed0a556f55.jpg" style="border:0px;border-image:none;max-width:100%;display:block;background-color:rgb(238, 238, 238);" width="696"/></span></div></div><div style="margin: 0.15rem 0px 30px; padding: 0px;"><span style="font-size: 1rem; color: rgb(153, 153, 153); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.75rem;">版权归极客邦科技所有，未经许可不得转载</span></div></div><div style="overflow:hidden;margin-bottom:-30px;"><span style="font-size: 12px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 20px; background-color: rgb(255, 90, 5); color: rgb(255, 255, 255); text-decoration: none; border-radius: 3px; cursor: pointer; display: inline-block; flex-grow: 1; float: right; height: 20px; padding: 4px 8px; text-align: center; -webkit-box-flex: 1; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); word-wrap: break-word;">写留言</span></div><div style="margin-top:2rem;"><h2 style="margin: 0px 0px 1rem; padding: 0px; text-align: center; position: relative; z-index: 1;"><span style="background: rgb(255, 255, 255); padding: 0px 1rem; font-size: 15.25px; display: inline-block; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Helvetica Neue&quot;, Verdana, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.35;">精选留言</span></h2><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/132.jpg" type="image/jpeg" data-filename="132.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">blackpiglet</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">50</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><div><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">1 之前遇到过，但是没有考虑如何解决，临时抱佛脚，查了 lxcfs，尝试回答一下。top 是从 /prof/stats 目录下获取数据，所以道理上来讲，容器不挂载宿主机的该目录就可以了。lxcfs就是来实现这个功能的，做法是把宿主机的 /var/lib/lxcfs/proc/memoinfo 文件挂载到Docker容器的/proc/meminfo位置后。容器中进程读取相应文件内容时，LXCFS的FUSE实现会从容器对应的Cgroup中读取正确的内存限制。从而使得应用获得正确的资源约束设定。kubernetes环境下，也能用，以ds 方式运行 lxcfs ，自动给容器注入争取的 proc 信息。</span></div><div><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">2 用的是vanilla kubernetes，遇到的主要挑战就是性能损失和多租户隔离问题，性能损失目前没想到好办法，可能的方案是用ipvs 替换iptables ，以及用 RPC 替换 rest。多租户隔离也没有很好的方法，现在是让不同的namespace调度到不同的物理机上。也许 rancher和openshift已经多租户隔离。</span></div></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">课代表出现了！</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/132 [1].jpg" type="image/jpeg" data-filename="132.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">monkey</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">16</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">对cgroup有了更深的了解，作者能帮所有订阅的同学建个微信群方便大家交流心得吗？买的其他课程很多老师都建了交流群氛围挺好的哈。</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">我跟编辑沟通一下</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/b0894e16.jpg" type="image/jpeg" data-filename="b0894e16.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">天秤vs永恒</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">14</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">对 Namespace 和 Cgroups 的理解又加深了很多！</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/0d8b5431.jpg" type="image/jpeg" data-filename="0d8b5431.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">snakorse</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">7</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">不太明白，既然都是用的宿主内核，那容器内还有不同的操作系统(centos,ubuntu)之分吗?如果有，那是如何做到的呢？</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/5acd3276.jpg" type="image/jpeg" data-filename="5acd3276.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">atompi</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">7</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><div><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">1. 把宿主机的 /var/lib/lxcfs/proc/* 文件挂载到容器的/proc/*</span></div><div><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">2. 既然有人提到了Windows运行容器的疑问，那就从这里说开。虚拟机可以通过vbox、VMware、Hyper-V直接运行在各种支持虚拟化的操作系统上，而 Linux 容器只能运行在Linux内核的操作系统之上，而且内核版本也有所限制（详见namespace、Cgroups在Linux内核中的发展史）。对于前面仁兄所说的Docker可以在Windows10上运行，并不是直接运行在Windows操作系统中，而是通过Hyper-V的支持，借助docker-machine，相当于是在Linux内核的虚拟机上运行的容器，实际上还是跑在Linux内核之上。</span></div></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/132 [2].jpg" type="image/jpeg" data-filename="132.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">Jeff.W</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">6</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">可怜的容器，被Namespace欺骗，又被Cgroups限制，在这样的环境下，还发挥着自己生命的意义-与应用程序同生命周期，同生共死～</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-13</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/7f575aec.jpg" type="image/jpeg" data-filename="7f575aec.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">A-</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">6</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">这篇文章写的真不错，终于明白cgroup是干嘛的了。再有，我能在这里打招聘广告吗？</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">不太好，这里还是交流技术为主</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/28f11cd9.jpg" type="image/jpeg" data-filename="28f11cd9.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">岁月～静好</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">4</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">相对于虚拟机来说，容器没有专门的cpu内存等，没有虚拟的操作系统，只是通过namespace重命名的进程运行买物理机上，没有实质性的隔离，会发生容器内的应用越狱等情况。但可以通过cgroup来限制容器的cpu内存等的使用，现有问题是top，/pro下查看到的还是物理界机的相关信息。不知道理解的是否正确？</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">是的呢</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/dc20161e.jpg" type="image/jpeg" data-filename="dc20161e.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">叫我胖柴柴😊</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">3</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">/proc文件系统的问题我好像遇到过这个坑..当时在容器上运行的java应用，由于当时jvm参数没正确配置上，就用默认的，而容器设置的内存为4g，最后oom了，当时用命令查看容器的内存占用情况，竟然发现内存竟然有60多g。 那应该显示的是宿主机的内存了，jvm按照宿主机内存大小分配的默认内存应该大于4g 所以还没full gc 就oom了</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-10</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">这个问题确实很普遍</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-10</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/095db0c5.jpg" type="image/jpeg" data-filename="095db0c5.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">Django</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">3</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">想问下，windows10中的linux子系统是如何实现的？</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">应该是API翻译，即，把linux syscall翻译成windows syscall</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/6d82e7a3.jpg" type="image/jpeg" data-filename="6d82e7a3.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">暮雨</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">容器内部还能再做namespace和cgroup么？也就是容器中再做docker</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-08</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">没问题。但是要挂载对应的文件系统，开启需要的权限。</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-08</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/0.png" type="image/png" data-filename="0.png" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">paingain</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">是不是可以理解：一个docker里面跑的进程都是docker这个进程的子进程？</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-07</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">不。是entrypoint进程的子进程。docker基本上是旁路控制的作用。</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-07</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/132 [3].jpg" type="image/jpeg" data-filename="132.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">microshaoft</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">讲讲端口，环境变量，网络如何复用隔离的，容器内执行关机命令是如何被限制的</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-07</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/ff215671.jpg" type="image/jpeg" data-filename="ff215671.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">Cloud*</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">通过 lxcfs 来实现隔离，具体是 lxcfs 在宿主机上维护进程组信息，然后容器启动的时候通过 -v 参数将 lxcfs /proc目录挂载到容器的 /proc 目录，当容器中获取 /proc 信息时，实际上是宿主机上对该容器的进程组信息 …/PID/proc 进行操作。</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/7aec01a5.jpg" type="image/jpeg" data-filename="7aec01a5.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">晓聪</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><div><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">cgroups原来是这样的，之前看着这名字都头疼。</span></div><div><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">最近使用docker-compose有一个mongdb的容器，程序运行起来后，大概率会导致本地都连不上宿主机。看来可能是某个容器资源占用太大了，需要限制一下</span></div></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/c296d424.jpg" type="image/jpeg" data-filename="c296d424.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">Oracleblog</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">容器的本质是一个进程，那所有的容器的image是不是都基于一个比较小的linux内核？因为进去容器之后能看到类似文件系统目录，还能执行很多操作系统命令。</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">没有内核。详见下一节镜像的讲解。</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/defaultAvatar.e4ab9fe.jpg" type="image/jpeg" data-filename="defaultAvatar.e4ab9fe.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">pytimer</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">为什么容器不添加磁盘限制？</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">技术上没有问题，但对上层编排系统的挑战比较大</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/132 [4].jpg" type="image/jpeg" data-filename="132.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">gotojeff</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">2</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">Linux container 不是可以跑在windows10上面吗？请问文章里是这是行不通的是什么意思？</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-05</span></div><div style="font-size:15.25px;"><span style="font-size: 15.25px; color: rgb(255, 90, 5); font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; -webkit-text-stroke-width: 0.2px;"></span> <span style="margin-left: -12px; font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">作者回复</span></div><div style="margin: 0px; padding: 0px; font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.8;">它实际上是跑在一个虚拟机里的</span></div><div style="margin: 0px; padding: 0px; font-size: 9px;"><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;">2018-09-05</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/97f880ec.jpg" type="image/jpeg" data-filename="97f880ec.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">波</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">1</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">把复杂的问题讲得如此简单易懂，这才叫专家，👍</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-14</span></div></div></div><div style="margin: 0px 0px 1rem; padding: 0px; width: 100%; display: flex; list-style-position: inside; flex-direction: row; -webkit-box-orient: horizontal; -webkit-box-direction: normal;"><div><span style="color: rgb(51, 51, 51); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8;"><img src="06  白话容器基础（二）：隔离与限制_files/06ac14e8.jpg" type="image/jpeg" data-filename="06ac14e8.jpg" style="border:0px;border-image:none;border-radius:50%;width:2.62rem;height:2.62rem;flex-shrink:0;" width="42"/></span></div><div style="margin-left:0.5rem;flex-grow:1;-webkit-box-flex:1;"><div style="width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;-webkit-box-align:center;-webkit-box-pack:justify;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><div><span style="font-size: 15.25px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.2;">彼岸</span></div><div style="display:flex;flex-direction:row;align-items:center;-webkit-box-align:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;"><a href="http://loadhtml/#" style="word-wrap: break-word; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); border-bottom: medium none currentcolor; font-size: 15.25px; display: flex; flex-direction: row; align-items: center; -webkit-box-align: center; -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(26, 188, 156); text-decoration: none;"></a><a href="#" style="font-size: 0.75rem; font-family: iconfont; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(136, 136, 136); text-decoration: none; display: inline-block; margin-right: 0.3rem; margin-top: -0.01rem; -webkit-text-stroke-width: 0.2px;"></a> <a href="#" style="font-size: 15.25px; font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1.8; color: rgb(255, 90, 5); text-decoration: none;">1</a></div></div><div style="font-size: 15.25px; white-space: normal; word-break: break-all;"><span style="font-size: 15.25px; color: rgb(53, 53, 53); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 400; line-height: 1.6;">老师好，想问下，linux中的非容器进程与容器进程，实际根本没啥区别，只是通过cgroup与namspace的限制后，使得进程满足了容器制定的规范后，我们就可以把此进程称为容器了。其容器本质还是进程，只是是个有限定的特殊进程而已</span></div><div><span style="font-size: 9px; color: rgb(136, 136, 136); font-family: &quot;PingFang SC&quot;, &quot;Lantinghei SC&quot;, &quot;Microsoft Yahei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Sans Serif&quot;, &quot;WenQuanYi Micro Hei&quot;, Helvetica, sans-serif; font-stretch: normal; font-style: normal; font-variant: normal; font-weight: 300; line-height: 1;">2018-09-13</span></div></div></div></div></div></div></div></div><div><br/></div></span>
</div></body></html> 